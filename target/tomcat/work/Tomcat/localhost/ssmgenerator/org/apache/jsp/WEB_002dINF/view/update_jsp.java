/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2019-06-24 05:44:15 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.view;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class update_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<title>table update</title>\r\n");
      out.write("<link rel=\"stylesheet\" href=\"../static/layui/css/layui.css\" >\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("<h2>修改页面</h2>\r\n");
      out.write("<script type=\"text/javascript\" src=\"../static/layui/layui.js\" charset=\"utf-8\"></script>\r\n");
      out.write("<!-- 修改数据页面 -->\r\n");
      out.write("<form class=\"layui-form\" >\r\n");
      out.write("<div class=\"layui-form-item \">\r\n");
      out.write("    <label class=\"layui-form-label \">ID</label>\r\n");
      out.write("    <div class=\"layui-input-block \">\r\n");
      out.write("      <input type=\"text\" name=\"userid\"  class=\"layui-input\" id=\"schid\" disabled=\"disabled\">\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("  <div class=\"layui-form-item \">\r\n");
      out.write("    <label class=\"layui-form-label \">姓名 <span style=\"color:red\">*</span></label>\r\n");
      out.write("    <div class=\"layui-input-block \">\r\n");
      out.write("      <input type=\"text\" name=\"name\" id=\"schname\" lay-verify=\"username\" autocomplete=\"off\" placeholder=\"请输入2-6个汉字\" class=\"layui-input\">\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("  \r\n");
      out.write("  <div class=\"layui-form-item\">\r\n");
      out.write("    <label class=\"layui-form-label\">年龄 <font color='red'>*</font></label>\r\n");
      out.write("    <div class=\"layui-input-block\">\r\n");
      out.write("      <input type=\"text\" name=\"age\"  id=\"schage\" lay-verify=\"userage\" autocomplete=\"off\" placeholder=\"请输入年龄：1-150岁\" class=\"layui-input\">\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("  \r\n");
      out.write("    <div class=\"layui-form-item\">\r\n");
      out.write("    <label class=\"layui-form-label\">邮箱 <font color='red'>*</font></label>\r\n");
      out.write("    <div class=\"layui-input-block\">\r\n");
      out.write("      <input type=\"text\" name=\"email\" id=\"schemail\" lay-verify=\"useremail\" autocomplete=\"off\" placeholder=\"请输入邮箱格式：zhongguo@china.com\" class=\"layui-input\">\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("  \r\n");
      out.write(" <div class=\"layui-form-item\">\r\n");
      out.write("    <label class=\"layui-form-label\">单选框</label>\r\n");
      out.write("    <div class=\"layui-input-block\">\r\n");
      out.write("      <input type=\"radio\" name=\"sex\" value=\"男\" title=\"男\" id=\"schsex\" checked=\"\">\r\n");
      out.write("      <input type=\"radio\" name=\"sex\" value=\"女\" title=\"女\" id=\"schsex\">\r\n");
      out.write("    </div>\r\n");
      out.write("  </div>\r\n");
      out.write("   \r\n");
      out.write("   <div class=\"layui-upload\">\r\n");
      out.write("      <button type=\"button\" class=\"layui-btn\" id=\"uploadimage\" style=\"margin-left:60px;\">\r\n");
      out.write("        <i class=\"layui-icon\">&#xe67c;</i>上传图片 \r\n");
      out.write("       </button>\r\n");
      out.write("       <font color='red'>*</font>\r\n");
      out.write("       \t<div class=\"layui-inline layui-word-aux\">图片格式：JPG PNG JPEG  大小：1M</div>\r\n");
      out.write("       \t<div class=\"layui-upload-list\" >\r\n");
      out.write("\t\t    <input type=\"hidden\" id=\"imgupad\" >\r\n");
      out.write("\t\t    \r\n");
      out.write("\t\t </div>\r\n");
      out.write("\t\t  <div class=\"layui-upload-list\">\r\n");
      out.write("\t\t   <img class=\"layui-upload-img\" id=\"imgupload\" style=\"width: 100px;height: 100px;margin-left:65px;\">\r\n");
      out.write("\t\t   <p id=\"demoText\"></p>\r\n");
      out.write("\t\t </div>\r\n");
      out.write("   </div> \r\n");
      out.write("  \r\n");
      out.write("  <div class=\"layui-form-item\">\r\n");
      out.write("    <div class=\"layui-input-block\" style=\"margin-left:350px;\">\r\n");
      out.write("    <button type=\"reset\" class=\"layui-btn layui-btn-primary\">重置</button>\r\n");
      out.write("      <button class=\"layui-btn\" lay-submit=\"\" lay-filter=\"btnsubmit\">立即更新</button>\r\n");
      out.write("    </div>\r\n");
      out.write("    </div>\r\n");
      out.write("    \r\n");
      out.write("</form>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!-- form表单 -->\r\n");
      out.write("<script>\r\n");
      out.write("layui.use(['form','layer','upload','jquery'],function(){\r\n");
      out.write("\tvar  schform = layui.form, schupload = layui.upload, $ = layui.jquery ,layer = layui.layer;\r\n");
      out.write("\t\r\n");
      out.write("\t/* 表单验证 \r\n");
      out.write("\t* https://c.runoob.com/front-end/854\r\n");
      out.write("\t*console.log(useremail.test(value));\r\n");
      out.write("\t*/\r\n");
      out.write("\tschform.verify({\r\n");
      out.write("\t\tusername: function(value){\r\n");
      out.write("\t\tvar\tusename = /^[\\u4e00-\\u9fa5]{2,6}$/;\r\n");
      out.write("\t\tif(!usename.test(value)) {\r\n");
      out.write("\t\t\treturn \"姓名格式：2-6个汉字\";\r\n");
      out.write("\t\t   }\r\n");
      out.write("\t\t},\r\n");
      out.write("\t\tuserage: function(value){\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t\tvar useage = /^(?:[1-9][0-9]?|1[01234][0-9]|150)$/;\r\n");
      out.write("\t\t\tif(!useage.test(value)){\r\n");
      out.write("\t\t\t\treturn \"年龄范围：1-150岁\";\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t},\r\n");
      out.write("\t\tuseremail: function(value){\r\n");
      out.write("\t\t\tvar useremail = /^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/;\r\n");
      out.write("\t\t\tif(!useremail.test(value)){\r\n");
      out.write("\t\t\t\treturn \"邮箱格式：beijing2020@china2020.net\";\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t});\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("\t/* 普通图片上传 */\r\n");
      out.write("  var uploadInst = schupload.render({\r\n");
      out.write("    elem: '#uploadimage',\r\n");
      out.write("    url: './upload',\r\n");
      out.write("    method: 'post',\r\n");
      out.write("    acceptMime: 'image/jpg,image/png,image/jpeg',\r\n");
      out.write("\taccept: 'images',  // 定义上传的类型为图片\r\n");
      out.write("    size: 1024,  // 上传图片的大小KB\r\n");
      out.write("    exts: 'jpg|png|jpeg',  // 允许上传的文件后缀\r\n");
      out.write("    auto: true, //选择文件后自动上传\r\n");
      out.write("    before: function(obj){\r\n");
      out.write("      //预读本地文件示例，不支持ie8\r\n");
      out.write("      obj.preview(function(index, file, result){\r\n");
      out.write("    \t  \r\n");
      out.write("    \t  // input隐藏域添加img\r\n");
      out.write("    \t $('#imgupad').attr('value',file.name);\r\n");
      out.write("    \t// 图片链接（base64）\r\n");
      out.write("        $('#imgupload').attr('src', result); \r\n");
      out.write("      });\r\n");
      out.write("    }\r\n");
      out.write("    ,done: function(res){\r\n");
      out.write("    \tvar status = res.code;\r\n");
      out.write("    \t\r\n");
      out.write("    \tswitch (status) {\r\n");
      out.write("\t\tcase 109:\r\n");
      out.write("\t\t\treturn layer.msg(res.msg,{icon: 5,time: 1200});\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("         case 110:\r\n");
      out.write("\t\t\treturn layer.msg(res.msg,{icon: 5,time: 1200});\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("         case 0:\r\n");
      out.write("        \t return layer.msg(\"图片上传成功\",{icon: 6,time: 500});\r\n");
      out.write(" \t\t\t break;\r\n");
      out.write("\t\tdefault:\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("\t\t}    \t\r\n");
      out.write("    \r\n");
      out.write("    }\r\n");
      out.write("    ,error: function(){\r\n");
      out.write("    \tlayer.msg('上传失败',{icon: 5,time: 1100});\r\n");
      out.write("      //演示失败状态，并实现重传\r\n");
      out.write("      var demoText = $('#demoText');\r\n");
      out.write("      demoText.html('<span style=\"color: #FF5722;\">上传失败</span> <a class=\"layui-btn layui-btn-xs demo-reload\" style=\"margin-left:0px;\">重试</a>');\r\n");
      out.write("      demoText.find('.demo-reload').on('click', function(){\r\n");
      out.write("        uploadInst.upload();\r\n");
      out.write("      });\r\n");
      out.write("    }\r\n");
      out.write("    \r\n");
      out.write("  });\r\n");
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("\t\t/* 提交按钮事件\r\n");
      out.write("\t\t* https://blog.csdn.net/yin13037173186/article/details/83302628\r\n");
      out.write("\t\t*/\r\n");
      out.write("\tschform.on('submit(btnsubmit)',function(data){\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tvar field = data.field;\r\n");
      out.write("\t\tvar file = data.field.file;\r\n");
      out.write("\t\t    file = $('#imgupad').attr('value');\r\n");
      out.write("\t\t    \r\n");
      out.write("\t\t $.ajax({\r\n");
      out.write("\t\t\t  url:'./updateById',\r\n");
      out.write("\t\t\t  type:'post',\r\n");
      out.write("\t\t\t  data:{\"id\":field.userid,\"username\":field.name,\"userage\":field.age,\"mailbox\":field.email,\"usergender\":field.sex,\"headportrait\":file},\r\n");
      out.write("\t\t\t  success:function(result){\t\r\n");
      out.write("\t\t\t\t  \r\n");
      out.write("\t\t\t\t  if(result.data == null) {\r\n");
      out.write("\t\t\t\t\t  layer.msg(result.msg,{icon: 5,time: 1200});\r\n");
      out.write("\t\t\t\t  }\t\r\n");
      out.write("\t\t\t\t    // 根据status 状态提醒信息\r\n");
      out.write("\t\t\t\t \tvar\tstatus = result.code;\r\n");
      out.write("\t\t\t\t \t\r\n");
      out.write("\t\t\t\t \tswitch (status) {\r\n");
      out.write("\t\t\t\t\tcase 113:\r\n");
      out.write("\t\t\t\t\t\treturn layer.msg(result.msg,{icon: 5,time: 1200});\r\n");
      out.write("\t\t\t\t\t\tbreak;\r\n");
      out.write("\t\t\t\t\tcase 114:\r\n");
      out.write("\t\t\t\t\t\treturn layer.msg(result.msg,{icon: 5,time: 1200});\r\n");
      out.write("\t\t\t\t\t\tbreak;\t\r\n");
      out.write("\t\t\t\t\tcase 200:\r\n");
      out.write("\t\t\t\t\t\tvar index = parent.layer.getFrameIndex(window.name);\r\n");
      out.write("\t\t\t\t\t\tparent.layer.msg(result.msg, {icon: 6,time:900});\r\n");
      out.write("\t\t\t\t\t\tparent.layer.close(index);\r\n");
      out.write("\t\t\t\t\t\t//刷新整个表格\r\n");
      out.write("\t\t\t\t\t\twindow.parent.location.reload();\t\r\n");
      out.write("\t\t\t\t\t\tbreak;\t\t\r\n");
      out.write("\t\t\t\t\tdefault:\r\n");
      out.write("\t\t\t\t\t\tbreak;\r\n");
      out.write("\t\t\t\t\t}\t\r\n");
      out.write("\t\t\t\t \t\t \r\n");
      out.write("\t\t\t  }\r\n");
      out.write("\t\t\t  \r\n");
      out.write("\t\t  })\r\n");
      out.write("\t\t\r\n");
      out.write("\t\treturn false; \r\n");
      out.write("\t})\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t/* 最后一个 */\r\n");
      out.write("});\r\n");
      out.write("\r\n");
      out.write("</script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
