/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.47
 * Generated at: 2019-06-24 09:10:27 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.view;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class list_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<title>table list</title>\r\n");
      out.write("<link rel=\"stylesheet\" href=\"../static/layui/css/layui.css\">\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("<h2>表格首页</h2>\r\n");
      out.write("<script type=\"text/javascript\" src=\"../static/layui/layui.js\" charset=\"utf-8\"></script>\r\n");
      out.write("<!-- 数据操作按钮1 -->\r\n");
      out.write("\t<div class=\"layui-btn-group demoTable\">\r\n");
      out.write("\t\t<button class=\"layui-btn\" type=\"button\" id=\"btnadd\">\r\n");
      out.write("\t\t\t<i class=\"layui-icon\">&#xe654;</i>添加\r\n");
      out.write("\t\t</button>\r\n");
      out.write("\t\t<button class=\"layui-btn\" type=\"button\" id=\"btndel\">\r\n");
      out.write("\t\t\t<i class=\"layui-icon layui-icon-delete\"></i>批量删除\r\n");
      out.write("\t\t</button>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t\r\n");
      out.write("\t<table id=\"stable\" lay-filter=\"schtest\"></table>\r\n");
      out.write("\t\r\n");
      out.write("\t<script type=\"text/html\" id=\"bartable\">\r\n");
      out.write("       <a class=\"layui-btn layui-btn-xs\" lay-event=\"edit\">\r\n");
      out.write("           <i class=\"layui-icon layui-icon-edit\"></i>编辑\r\n");
      out.write("       </a>\r\n");
      out.write("   </script>\r\n");
      out.write("\t\r\n");
      out.write("<script>\r\n");
      out.write("\r\n");
      out.write("/* 数据库时间显示到页面的函数 \r\n");
      out.write(" *  https://baike.baidu.com/item/date/9879981?fr=aladdin\r\n");
      out.write(" */\r\n");
      out.write("function createTime(v){\r\n");
      out.write("\tvar date = new Date(v);\r\n");
      out.write("    var y = date.getFullYear();\r\n");
      out.write("    var m = date.getMonth()+1;\r\n");
      out.write("    m = m<10?'0'+m:m;\r\n");
      out.write("    var d = date.getDate();\r\n");
      out.write("    d = d<10?(\"0\"+d):d;\r\n");
      out.write("    var h = date.getHours();\r\n");
      out.write("    h = h<10?(\"0\"+h):h;\r\n");
      out.write("    var M = date.getMinutes();\r\n");
      out.write("    M = M<10?(\"0\"+M):M;\r\n");
      out.write("    var s = date.getSeconds();\r\n");
      out.write("    s = s<10?(\"0\"+s):s;\r\n");
      out.write("    var str = y + \"-\" + m + \"-\" + d + \" \" + h + \":\" + M + \":\" + s;\r\n");
      out.write("    return str;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("/* layui表格 */\r\n");
      out.write("layui.use(['table','jquery','upload','layer'],function(){\r\n");
      out.write("      var schtable = layui.table, $ = layui.jquery, \r\n");
      out.write("          schupload = layui.upload, schlayer = layui.layer;\r\n");
      out.write("\r\n");
      out.write("         //执行渲染\r\n");
      out.write("\t\tschtable.render({\r\n");
      out.write("\t\t\telem:'#stable',\r\n");
      out.write("\t\t\theight:450,\r\n");
      out.write("\t\t\turl:'./selectAll',\r\n");
      out.write("\r\n");
      out.write("\t\t\tcols:[[\r\n");
      out.write("\t\t\t\t{type:'checkbox'},\r\n");
      out.write("\t\t\t\t{field:'id',title:'ID',align:'center',width:80},\r\n");
      out.write("\t\t\t\t{field:'username',title:'姓名',align:'center',width:100},\r\n");
      out.write("\t\t\t\t{field:'userage',title:'年龄',align:'center',width:80},\r\n");
      out.write("\t\t\t\t{field:'mailbox',title:'邮箱',align:'left',width:190},\r\n");
      out.write("\t\t\t\t{field:'usergender',title:'性别',align:'center',width:80},\r\n");
      out.write("\t\t\t\t{field:'headportrait',title:'头像',align:'left',width:280},\r\n");
      out.write("{field:'creationtime',title:'创建时间',align:'left',width:170,templet:function (d){return createTime(d.creationtime);}},\r\n");
      out.write("{field:'modifytime',title:'修改时间',align:'left',width:170,templet:\"<div>{{layui.util.toDateString(d.modifytime,'yyyy-MM-dd HH:mm:ss')}}</div>\"},\r\n");
      out.write("{title:'操作',align:'center',width:80,toolbar: '#bartable'}\r\n");
      out.write("\t\t\t\t]],\r\n");
      out.write("\t\t});\r\n");
      out.write("\r\n");
      out.write("\t\t/*新增数据  */\r\n");
      out.write("         $(\"#btnadd\").on('click',function(){\r\n");
      out.write("        \t layer.open({\r\n");
      out.write("       \t\t  type: 2,\r\n");
      out.write("       \t\t  title: '新增页面',\r\n");
      out.write("       \t\t  shadeClose: true,\r\n");
      out.write("       \t\t  shade: 0.8,\r\n");
      out.write("     \t\t  shadeClose:false,\r\n");
      out.write("       \t\t  area: ['600px', '500px'],\r\n");
      out.write("       \t\t  content: './addList'\r\n");
      out.write("       \t\t});\r\n");
      out.write("        \t \r\n");
      out.write("         });\r\n");
      out.write("         \r\n");
      out.write("     \t/*修改数据  \r\n");
      out.write("     \t* 监听行工具条\r\n");
      out.write("     \t*/\r\n");
      out.write("        schtable.on('tool(schtest)',function(obj){\r\n");
      out.write("        \tvar datas = obj.data;\r\n");
      out.write("        \t//console.log(datas.headportrait)\r\n");
      out.write("        \t\r\n");
      out.write("        \tvar  img = datas.headportrait;\r\n");
      out.write("        \tconsole.log(img)\r\n");
      out.write("        \t\r\n");
      out.write("        \tvar layEvent = obj.event;\r\n");
      out.write("        \tif(layEvent === 'edit') {\r\n");
      out.write("        \t\tlayer.open({\r\n");
      out.write("             \t\t  type: 2,\r\n");
      out.write("             \t\t  title: '修改页面',\r\n");
      out.write("             \t\t  shadeClose: true,\r\n");
      out.write("             \t\t  shade: 0.8,\r\n");
      out.write("           \t\t      shadeClose:false,\r\n");
      out.write("             \t\t  area: ['600px', '550px'],\r\n");
      out.write("             \t\t  content: './updateParam',\r\n");
      out.write("             \t\t success:function(layero,index){\r\n");
      out.write("             \t\t\t\r\n");
      out.write("             \t\t\t\r\n");
      out.write("             \t\t\t // 获取body内容\r\n");
      out.write("             \t\t\t var tableBody = schlayer.getChildFrame('body',index);\r\n");
      out.write("             \t\t\t // 得到ifrmae的窗口对象\r\n");
      out.write("             \t\t\t var iframeWin = window[layero.find('iframe')[0]['name']];\r\n");
      out.write("             \t\t\t // 执行iframe方法\r\n");
      out.write("             \t\t\ttableBody.find('#schid').val(datas.id);\r\n");
      out.write("             \t\t\t\r\n");
      out.write("             \t\t\ttableBody.find('#schname').val(datas.username);\r\n");
      out.write("             \t\t\ttableBody.find('#schage').val(datas.userage); \r\n");
      out.write("             \t\t\ttableBody.find('#schemail').val(datas.mailbox);\r\n");
      out.write("             \t\t\ttableBody.find('#schsex').val(datas.usergender); \r\n");
      out.write("             \t\t\ttableBody.find('#imgupad').val(datas.headportrait); \r\n");
      out.write("             \t\t\t\r\n");
      out.write("             \t\t }\r\n");
      out.write("             \t\t});\r\n");
      out.write("        \t}\r\n");
      out.write("        }) \r\n");
      out.write("     \t\r\n");
      out.write("        \r\n");
      out.write("        \r\n");
      out.write("     \t/*批量删除  */\r\n");
      out.write("       \r\n");
      out.write("        \t$(\"#btndel\").on('click',function(){\r\n");
      out.write("        \t\t\r\n");
      out.write("        \t\tvar checkStatus = schtable.checkStatus('stable'); \r\n");
      out.write("        \t\tvar   len = checkStatus.data.length;\r\n");
      out.write("        \t\tvar   array =  checkStatus.data;\r\n");
      out.write("\r\n");
      out.write("        \t\t//boolean isAll = checkStatus.isAll;\r\n");
      out.write("        \t\tif(len == 0) {\r\n");
      out.write("        \t\t\treturn schlayer.msg(\"请选一行数据\",{icon:6,time:1000});\r\n");
      out.write("        \t\t} \r\n");
      out.write("\r\n");
      out.write("        \t\t\t// 多个id之间用,号隔开\r\n");
      out.write("        \t\t    var  ids = \"\";\r\n");
      out.write("        \t\t\tfor (var i = 0; i < array.length; i++) {\r\n");
      out.write("\t\t\t\t\t\tids += array[i].id + \",\";\t\t\t\t\t\r\n");
      out.write("        \t\t      }\r\n");
      out.write("        \t\t\t//console.log(ids )\r\n");
      out.write("        \t\tschlayer.confirm('真的删除ID为'+ids+'的用户么',function(index){\r\n");
      out.write("        \t\t\tconsole.log(index)\r\n");
      out.write("        \t           $.ajax({\r\n");
      out.write("        \t        \t   url:'deleteByIds',\r\n");
      out.write("        \t        \t   type:'post',\r\n");
      out.write("        \t        \t   data:{'ids':ids},\r\n");
      out.write("        \t        \t   success:function(res){\r\n");
      out.write("        \t        \t\t   console.log(res)\r\n");
      out.write("        \t        \t\t   \r\n");
      out.write("        \t        \t   }\r\n");
      out.write("        \t        \t   \r\n");
      out.write("        \t           })\r\n");
      out.write("        \t           \r\n");
      out.write("       \t\t\t\tschlayer.close(index);\r\n");
      out.write("        \t\t})\r\n");
      out.write("        \t})  \r\n");
      out.write("       \r\n");
      out.write("        \t  \r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("     \t\r\n");
      out.write("\t\t\t\t\t\t//最后一个\r\n");
      out.write("\t\t\t\t\t});\r\n");
      out.write("</script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
